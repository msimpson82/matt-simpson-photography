{{ define "main" }}

<!-- Hero -->
{{ $h := .Site.Data.homepage.hero }}
{{ $heroLayout := $h.layout | default "full" }}

{{ if eq $heroLayout "split" }}
<!-- Split Hero -->
<section class="hero hero-split">
    <div class="hero-split-image">
        <img src="{{ $h.image }}" alt="{{ $h.image_alt }}">
    </div>
    <div class="hero-split-content">
        <div class="hero-eyebrow">{{ $h.eyebrow }}</div>
        <h1 class="hero-h1">{{ $h.heading_pre }}<span class="serif">{{ $h.heading_serif }}</span>{{ $h.heading_post }}</h1>
        <p class="hero-p">{{ $h.paragraph }}</p>
        <div class="hero-actions">
            <a href="#contact" class="btn-primary">{{ $h.button_primary }}</a>
            <a href="#featured-projects" class="btn-outline">{{ $h.button_secondary }}</a>
        </div>
    </div>
</section>

{{ else }}
<!-- Full Width Hero -->
<section class="hero">
    <div class="hero-mosaic">
        {{ $images := .Site.Data.galleries.hero.images }}
        {{ $cols := .Site.Data.galleries.hero.columns | default 3 }}
        {{ $total := len $images }}
        {{ if gt $total 0 }}
        {{ range $c := seq $cols }}
        {{ $dir := "up" }}{{ if eq (mod $c 2) 0 }}{{ $dir = "down" }}{{ end }}
        <div class="hero-col hero-col-{{ $dir }}">
            {{ range $i, $img := $images }}{{ if eq (mod $i $cols) (sub $c 1) }}<img src="{{ $img.path }}{{ $img.filename }}" alt="">{{ end }}{{ end }}
            {{ range $i, $img := $images }}{{ if eq (mod $i $cols) (sub $c 1) }}<img src="{{ $img.path }}{{ $img.filename }}" alt="">{{ end }}{{ end }}
        </div>
        {{ end }}
        {{ end }}
    </div>
    {{ $opacity := .Site.Data.galleries.hero.opacity | default 0.85 }}
    <div class="hero-wash" style="background: rgba(250,248,245,{{ $opacity }})"></div>
    <div class="hero-content">
        <div class="hero-eyebrow">{{ $h.eyebrow }}</div>
        <h1 class="hero-h1">{{ $h.heading_pre }}<span class="serif">{{ $h.heading_serif }}</span>{{ $h.heading_post }}</h1>
        <p class="hero-p">{{ $h.paragraph }}</p>
        <div class="hero-actions">
            <a href="#contact" class="btn-primary">{{ $h.button_primary }}</a>
            <a href="#featured-projects" class="btn-outline">{{ $h.button_secondary }}</a>
        </div>
    </div>
</section>
{{ end }}

<!-- Statement -->
<section class="statement">
    <div class="statement-inner">
        {{ $s := .Site.Data.homepage.statement }}
        <p class="statement-text"><strong>{{ $s.bold }}</strong> {{ $s.text }}</p>
        <div class="statement-line"></div>
    </div>
</section>

<!-- Services Grid -->
<section class="services-section" id="services">
    <div class="services-header">
        <div class="services-label">Photography Services in Louisville, KY</div>
        <div class="services-title">What I Do</div>
    </div>
    <div class="services-grid">
        <a href="/headshot-photographer-louisville-ky/" class="svc-card">
            <img src="/images/professional-headshot-louisville-ky.jpg" alt="Professional headshot photographer in Louisville KY — woman in business attire, natural light studio">
            <div class="svc-card-overlay">
                <div class="svc-card-name">Headshots</div>
                <div class="svc-card-desc">Corporate headshots, LinkedIn portraits, actor headshots, and team photos. Shot in my natural light Germantown studio or on-location at your office.</div>
                <div class="svc-card-link">Headshot Photography &rarr;</div>
            </div>
        </a>
        <a href="/event-photographer-louisville-ky/" class="svc-card">
            <img src="/images/louisville-event-photography-conference.jpg" alt="Louisville event photographer — live concert and festival coverage" loading="lazy">
            <div class="svc-card-overlay">
                <div class="svc-card-name">Events</div>
                <div class="svc-card-desc">Conferences, galas, corporate events, and festivals. I capture the energy, the connections, and the moments that matter to your organization.</div>
                <div class="svc-card-link">Event Photography &rarr;</div>
            </div>
        </a>
        <a href="/commercial-photographer-louisville-ky/" class="svc-card">
            <img src="/images/commercial-photography-louisville-brand.jpg" alt="Commercial photographer Louisville KY — brand photography for local businesses" loading="lazy">
            <div class="svc-card-overlay">
                <div class="svc-card-name">Commercial</div>
                <div class="svc-card-desc">Marketing campaigns, website imagery, branding shoots, and corporate photography for businesses that need images that actually perform.</div>
                <div class="svc-card-link">Commercial Photography &rarr;</div>
            </div>
        </a>
    </div>
</section>

<!-- Featured Galleries -->
<section class="galleries" id="featured-projects">
    <div class="galleries-header">
        <div class="galleries-label">Selected Work</div>
        <div class="galleries-title">Featured Projects</div>
    </div>

    {{ $featured := where (where site.RegularPages "Section" "projects") "Params.homepage_featured" true }}
    {{ $sorted := sort $featured "Params.homepage_order" }}
    {{ range $sorted }}
    <div class="gal-item">
        <div class="gal-photo">
            <img src="/images/{{ .Params.hero_image }}" alt="{{ .Title }} — {{ .Params.project_type }} Louisville KY" loading="lazy">
        </div>
        <div class="gal-content">
            <div class="gal-tag">{{ .Params.project_type }}</div>
            <div class="gal-name">{{ .Title }}</div>
            <p class="gal-desc">{{ .Params.homepage_description }}</p>
            <a href="{{ .RelPermalink }}" class="gal-btn">View Full Gallery</a>
        </div>
    </div>
    {{ end }}
</section>

<!-- Testimonial Band -->
<section class="testimonial-band">
    <div class="testimonial-band-inner">
        <div class="testimonial-band-stars">&#9733; &#9733; &#9733; &#9733; &#9733;</div>
        <blockquote class="testimonial-band-quote">"I CAN NOT thank you enough for your work on this! It was exactly what they were looking for. Tisha holds you in the utmost regard and I see why."</blockquote>
        <div class="testimonial-band-author">&mdash; Emily Pratte, Art of Impact</div>
    </div>
</section>

<!-- About (Who's Behind the Camera) -->
<section class="about-section">
    {{ $a := .Site.Data.homepage.about }}
    <div class="about-section-photo">
        <img src="{{ $a.photo }}" alt="{{ $a.photo_alt }}" loading="lazy">
    </div>
    <div class="about-section-content">
        <div class="section-label">{{ $a.label }}</div>
        <h2 class="about-section-title">{{ $a.heading_pre }}<span class="serif">{{ $a.heading_serif }}</span></h2>
        <p class="about-section-text">{{ $a.paragraph_1 }}</p>
        <p class="about-section-text">{{ $a.paragraph_2 | safeHTML }}</p>
        <a href="/about/" class="btn-primary" style="align-self:flex-start; margin-top:20px;">{{ $a.button }}</a>
    </div>
</section>

<!-- Photo of the Day -->
<section class="potd" id="potd">
    <div class="potd-header">
        <div class="potd-label">Personal Work</div>
        <div class="potd-title">Photo of the Day</div>
    </div>
    <p class="potd-sub">No client briefs, no deadlines. Just capturing what catches my eye, what makes me smile, or what strikes me as beautiful. Thank you for looking.</p>

    {{ $potdPosts := where site.RegularPages "Section" "potd" }}
    {{ $sortedPosts := sort $potdPosts "Date" "desc" }}
    {{ $recentPosts := first 6 $sortedPosts }}
    {{ $featuredPost := where $potdPosts "Params.featured" true }}
    {{ $currentPost := index $sortedPosts 0 }}
    {{ if $featuredPost }}
        {{ $currentPost = index $featuredPost 0 }}
    {{ end }}

    <div class="potd-viewer">
        <div class="potd-featured">
            {{ range $index, $post := $recentPosts }}
            <img src="/images/potd/{{ $post.Params.image }}" alt="Photo of the Day — {{ $post.Date.Format "January 2, 2006" }}" {{ if eq $post $currentPost }}class="active"{{ end }} data-caption="{{ $post.Title }}" data-date="{{ $post.Date.Format "January 2, 2006" }}">
            {{ end }}
        </div>
        <button class="potd-nav potd-prev" onclick="potdNav(-1)">&lsaquo;</button>
        <button class="potd-nav potd-next" onclick="potdNav(1)">&rsaquo;</button>
    </div>
    <div class="potd-caption" id="potdCaption">{{ $currentPost.Title }}</div>
    <div class="potd-counter" id="potdCounter">1 / {{ len $recentPosts }}</div>

    <div class="potd-grid">
        {{ range $index, $post := $recentPosts }}
        <div class="potd-thumb{{ if eq $post $currentPost }} active{{ end }}" onclick="potdGo({{ $index }})">
            <img src="/images/potd/{{ $post.Params.image }}" alt="POTD thumbnail">
        </div>
        {{ end }}
    </div>
    <a href="/potd/archive/" class="potd-archive">View Full Archive</a>
</section>

<!-- Service Area -->
<section class="service-area">
    <div class="section-label">Where I Work</div>
    <h2 class="service-area-title">Louisville <span class="serif">and Beyond</span></h2>
    <p class="service-area-text">I'm based in Louisville, KY and serve clients throughout the region. Whether you need a photographer at your Louisville office, a corporate event in Lexington, or a commercial shoot in Southern Indiana — I'm there.</p>
    <ul class="service-area-list">
        <li>Louisville, KY</li>
        <li>Germantown</li>
        <li>NuLu</li>
        <li>Highlands</li>
        <li>St. Matthews</li>
        <li>Jeffersontown</li>
        <li>Downtown Louisville</li>
        <li>Jeffersonville, IN</li>
        <li>New Albany, IN</li>
        <li>Clarksville, IN</li>
        <li>Lexington, KY</li>
        <li>Frankfort, KY</li>
    </ul>
</section>

<!-- Contact -->
<section class="contact" id="contact">
    {{ $c := .Site.Data.homepage.contact }}
    <div class="contact-label">{{ $c.label }}</div>
    <div class="contact-title">{{ $c.heading }}</div>
    <p class="contact-sub">{{ $c.paragraph }}</p>
    <form class="contact-form" name="contact" method="POST" data-netlify="true">
        <input type="text" name="name" placeholder="Name" required>
        <input type="email" name="email" placeholder="Email" required>
        <input type="text" name="subject" placeholder="Subject">
        <textarea name="message" placeholder="Tell me about your project" required></textarea>
        <button type="submit" class="contact-submit">Send Message</button>
        <input type="hidden" name="form-name" value="contact">
    </form>
</section>

{{ end }}

{{ define "scripts" }}
<script>
// POTD carousel
var potdIdx = 0;
var potdImgs = document.querySelectorAll('.potd-featured img');
var potdThumbs = document.querySelectorAll('.potd-thumb');
var potdCaption = document.getElementById('potdCaption');
var potdCounter = document.getElementById('potdCounter');

// Find initial active
potdImgs.forEach(function(img, i){ if(img.classList.contains('active')) potdIdx = i; });

function potdGo(i){
    potdImgs[potdIdx].classList.remove('active');
    potdThumbs[potdIdx].classList.remove('active');
    potdIdx = i;
    if(potdIdx < 0) potdIdx = potdImgs.length - 1;
    if(potdIdx >= potdImgs.length) potdIdx = 0;
    potdImgs[potdIdx].classList.add('active');
    potdThumbs[potdIdx].classList.add('active');
    potdCaption.textContent = potdImgs[potdIdx].getAttribute('data-caption') || '';
    potdCounter.textContent = (potdIdx + 1) + ' / ' + potdImgs.length;
}

function potdNav(dir){ potdGo(potdIdx + dir); }
</script>
{{ end }}
