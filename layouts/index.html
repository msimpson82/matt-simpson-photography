{{ define "main" }}
    <!-- Hero Section -->
    <section class="hero" id="hero">
        <h1 class="hero-logo" id="heroLogo">Matt Simpson Photography</h1>
        <div class="hero-content">
            <p class="hero-text">
                Hi, I'm Matt - a commercial photographer in Louisville, KY, specializing in portraits, branding, and professional headshots.
            </p>
            <div class="hero-buttons">
                <a href="#portfolio" class="cta-button">My Work</a>
                <a href="#about" class="cta-button secondary">More About Me</a>
            </div>
        </div>
    </section>
    
    <!-- Grunge Border -->
    <div class="grunge-border"></div>

    <!-- Portfolio Section -->
    <section class="portfolio" id="portfolio">
        <div class="portfolio-grid">
            <div class="portfolio-item" data-image="/images/rocker.jpg">
                <img src="/images/rocker.jpg" alt="Music and entertainment photography">
            </div>
            <div class="portfolio-item" data-image="/images/wedding2.jpg">
                <img src="/images/wedding2.jpg" alt="Wedding photography">
            </div>
            <div class="portfolio-item" data-image="/images/portrait7.jpg">
                <img src="/images/portrait7.jpg" alt="Professional portrait photography">
            </div>
            <div class="portfolio-item" data-image="/images/portrait6.jpg">
                <img src="/images/portrait6.jpg" alt="Personal branding photography">
            </div>
            <div class="portfolio-item" data-image="/images/portraits.jpg">
                <img src="/images/portraits.jpg" alt="Group portrait photography">
            </div>
            <div class="portfolio-item" data-image="/images/wedding.jpeg">
                <img src="/images/wedding.jpeg" alt="Wedding moment photography">
            </div>
            <div class="portfolio-item" data-image="/images/portrait4.jpeg">
                <img src="/images/portrait4.jpeg" alt="Character portrait photography">
            </div>
            <div class="portfolio-item" data-image="/images/couple.jpeg">
                <img src="/images/couple.jpeg" alt="Couple photography">
            </div>
            <div class="portfolio-item" data-image="/images/portrait3.jpeg">
                <img src="/images/portrait3.jpeg" alt="Artistic portrait photography">
            </div>
            <div class="portfolio-item" data-image="/images/portrait2.jpg">
                <img src="/images/portrait2.jpg" alt="Lifestyle portrait photography">
            </div>
            <div class="portfolio-item" data-image="/images/portrait1.jpeg">
                <img src="/images/portrait1.jpeg" alt="Professional headshot photography">
            </div>
            <div class="portfolio-item" data-image="/images/shoes.jpg">
                <img src="/images/shoes.jpg" alt="Product photography">
            </div>
            <div class="portfolio-item" data-image="/images/alex1.jpeg">
                <img src="/images/alex1.jpeg" alt="Personal portrait photography">
            </div>
            <div class="portfolio-item" data-image="/images/portrait7.jpeg">
                <img src="/images/portrait7.jpeg" alt="Studio portrait photography">
            </div>
            <div class="portfolio-item" data-image="/images/greenriver.jpg">
                <img src="/images/greenriver.jpg" alt="Landscape photography">
            </div>
            <div class="portfolio-item" data-image="/images/6.jpg">
                <img src="/images/6.jpg" alt="Environmental photography">
            </div>
        </div>
    </section>

    <!-- Featured Projects Section -->
    <section class="featured-projects" id="featured-projects">
        <div class="featured-projects-container">
            <h2 class="section-title">Featured Projects</h2>
            
            <div class="projects-grid">
                <!-- Storyfest Louisville -->
                <div class="project-card">
                    <div class="project-image">
                        <img src="/images/story.jpg" alt="Storyfest Louisville Event Photography">
                        <div class="project-category">Event Photography</div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">Storyfest Louisville</h3>
                        <p class="project-description">Comprehensive event coverage capturing the energy and storytelling magic of Louisville's premier narrative festival. Shot live performances, audience engagement, and behind-the-scenes moments.</p>
                        <a href="/projects/storyfest-louisville" class="project-button">View Full Gallery</a>
                    </div>
                </div>

                <!-- Talespin Ale Fest -->
                <div class="project-card">
                    <div class="project-image">
                        <img src="/images/talespin.jpg" alt="Talespin Ale Fest Event Photography">
                        <div class="project-category">Event Photography</div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">Talespin Ale Fest</h3>
                        <p class="project-description">Check out my event photography showcasing craft beer culture, vendor interactions, live entertainment, and the vibrant community atmosphere of this celebrated brewing event.</p>
                        <a href="/projects/talespin-ale-fest" class="project-button">View Full Gallery</a>
                    </div>
                </div>

                <!-- The Perfumery -->
                <div class="project-card">
                    <div class="project-image">
                        <img src="/images/perfumery.jpg" alt="The Perfumery Branding Photography">
                        <div class="project-category">Branding Photography</div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">The Perfumery</h3>
                        <p class="project-description">Elevated product and lifestyle photography showcasing artisanal fragrances and the hands that make it possible.</p>
                        <a href="/projects/the-perfumery" class="project-button">View Full Gallery</a>
                    </div>
                </div>

                <!-- Current812 -->
                <div class="project-card">
                    <div class="project-image">
                        <img src="/images/current.jpg" alt="Current812 Branding Photography">
                        <div class="project-category">Branding Photography</div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">Current812</h3>
                        <p class="project-description">Contemporary brand photography for a beautiful luxury apartment complex in Jeffersonville, Indiana.</p>
                        <a href="/projects/current812" class="project-button">View Full Gallery</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Photo of the Day Section -->
    <section class="potd-section" id="potd">
        <div class="potd-container">
            <div class="potd-intro">
                <h2 class="potd-title">Photo of the Day</h2>
                <p class="potd-description">
                    No client briefs, no deadlines...just capturing what catches my eye, what makes me smile, or what strikes me as beautiful. Thank you for looking.
                </p>
            </div>

            <!-- Current Photo of the Day -->
            {{ $potdPosts := where site.RegularPages "Section" "potd" }}
            {{ $featuredPost := where $potdPosts "Params.featured" true }}
            {{ $sortedPosts := sort $potdPosts "Date" "desc" }}
            {{ $currentPost := index $sortedPosts 0 }}
            {{ if $featuredPost }}
                {{ $currentPost = index $featuredPost 0 }}
            {{ end }}

            <div class="potd-featured">
                <div class="potd-featured-image">
                    <img src="/images/potd/{{ $currentPost.Params.image }}" alt="Photo of the Day - {{ $currentPost.Date.Format "January 2, 2006" }}">
                </div>
                <div class="potd-featured-content">
                    <div class="potd-date">{{ $currentPost.Date.Format "January 2, 2006" }}</div>
                    <h3 class="potd-title">{{ $currentPost.Title }}</h3>
                    <div class="potd-caption">
                        {{ $currentPost.Content }}
                    </div>
                </div>
            </div>

            <!-- Recent Days Thumbnails -->
            <div class="potd-recent">
                <div class="potd-navigation">
                    <button class="potd-nav-btn potd-prev" id="potdPrev">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15,18 9,12 15,6"></polyline>
                        </svg>
                    </button>
                    
                    <div class="potd-thumbnails">
                        {{ $recentPosts := first 6 $sortedPosts }}
                        {{ range $index, $post := $recentPosts }}
                            {{ $isActive := "" }}
                            {{ if eq $post $currentPost }}{{ $isActive = "active" }}{{ end }}
                            <div class="potd-thumbnail {{ $isActive }}" 
                                 data-date="{{ $post.Date.Format "January 2, 2006" }}" 
                                 data-image="/images/potd/{{ $post.Params.image }}" 
                                 data-caption="{{ $post.Content }}"
                                 data-title="{{ $post.Title }}"
                                 data-index="{{ $index }}">
                                <img src="/images/potd/{{ $post.Params.image }}" alt="{{ $post.Date.Format "January 2, 2006" }}">
                            </div>
                        {{ end }}
                    </div>
                    
                    <button class="potd-nav-btn potd-next" id="potdNext">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </button>
                </div>
                <a href="#" class="potd-archive-link">Archive</a>
            </div>
        </div>
    </section>

    <!-- Call to Action Section -->
    <section class="cta-section" id="contact">
        <div class="cta-container">
            <h2 class="cta-title">Let's Get to Work.</h2>
            <p class="cta-subtitle">I am a professional photographer ready to work. Get in touch with the contact form below.</p>
            
            <form class="contact-form" action="mailto:hello@hardsearstudio.com" method="post" enctype="text/plain">
                <div class="form-group">
                    <input type="text" class="form-input" name="name" placeholder="Your Name" required>
                </div>
                <div class="form-group">
                    <input type="email" class="form-input" name="email" placeholder="Your Email" required>
                </div>
                <div class="form-group">
                    <textarea class="form-textarea" name="message" placeholder="Tell me about your project..." required></textarea>
                </div>
                <button type="submit" class="form-submit">Send Message</button>
            </form>
        </div>
    </section>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-container">
            <div class="lightbox-image-area">
                <img id="lightboxImage" src="" alt="Portfolio Image">
                <div class="lightbox-nav lightbox-prev" id="lightboxPrev">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <polyline points="15,18 9,12 15,6"></polyline>
                    </svg>
                </div>
                <div class="lightbox-nav lightbox-next" id="lightboxNext">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <polyline points="9,18 15,12 9,6"></polyline>
                    </svg>
                </div>
            </div>
            <div class="lightbox-sidebar">
                <div class="lightbox-header">
                    <div class="lightbox-counter" id="lightboxCounter">1 / 16</div>
                    <div class="lightbox-close" id="lightboxClose">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </div>
                </div>
                <div class="lightbox-content">
                    <h3 class="lightbox-title" id="lightboxTitle">Commercial Photography</h3>
                    <p class="lightbox-description" id="lightboxDescription">Professional brand storytelling through compelling visual narratives.</p>
                </div>
            </div>
        </div>
    </div>
{{ end }}

{{ define "scripts" }}
    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });

        // Mobile menu functionality
        const hamburger = document.getElementById('hamburger');
        const mobileMenu = document.getElementById('mobileMenu');
        const mobileMenuClose = document.getElementById('mobileMenuClose');

        hamburger.addEventListener('click', () => {
            mobileMenu.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        mobileMenuClose.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
        });

        document.querySelectorAll('.mobile-menu-links a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.remove('active');
                document.body.style.overflow = '';
            });
        });
                }
            });
        });

        // Logo animation and header visibility
        const heroLogo = document.getElementById('heroLogo');
        const navLogo = document.getElementById('navLogo');
        const header = document.getElementById('header');
        const portfolioSection = document.getElementById('portfolio');
        
        let lastScrollY = 0;
        let portfolioTop = 0;
        let scrollTimer = null;
        
        // Get portfolio position on load and resize
        function updatePortfolioPosition() {
            portfolioTop = portfolioSection.offsetTop;
        }
        
        updatePortfolioPosition();
        window.addEventListener('resize', updatePortfolioPosition);
        
        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const heroHeight = window.innerHeight;
            
            // Existing logo fade behavior
            const heroFadeProgress = Math.min(scrollY / (heroHeight * 0.18), 1);
            
            if (heroFadeProgress > 0) {
                const scale = 1 - (heroFadeProgress * 0.3);
                heroLogo.style.transform = `scale(${scale})`;
                heroLogo.style.opacity = 1 - heroFadeProgress;
            } else {
                heroLogo.style.transform = 'scale(1)';
                heroLogo.style.opacity = 1;
            }

            const navFadeStart = heroHeight * 0.10;
            const navFadeEnd = heroHeight * 0.15;
            
            if (scrollY < navFadeStart) {
                navLogo.style.opacity = 0;
            } else if (scrollY > navFadeEnd) {
                navLogo.style.opacity = 1;
            } else {
                const navProgress = (scrollY - navFadeStart) / (navFadeEnd - navFadeStart);
                navLogo.style.opacity = navProgress;
            }
            
            // Throttle nav hide/show behavior
            if (scrollTimer) clearTimeout(scrollTimer);
            
            scrollTimer = setTimeout(() => {
                // New nav hide/show behavior - only after portfolio section
                if (scrollY > portfolioTop + 100) { // Small offset to prevent flickering
                    const scrollDifference = Math.abs(scrollY - lastScrollY);
                    
                    if (scrollDifference > 5) { // Minimum scroll distance to trigger
                        if (scrollY > lastScrollY) {
                            // Scrolling down - hide nav
                            header.classList.add('nav-hidden');
                        } else {
                            // Scrolling up - show nav
                            header.classList.remove('nav-hidden');
                        }
                    }
                } else {
                    // Above portfolio - always show nav
                    header.classList.remove('nav-hidden');
                }
                
                lastScrollY = scrollY;
            }, 10);
        });

        // Portfolio lightbox functionality
        const portfolioItems = document.querySelectorAll('.portfolio-item');
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightboxImage');
        const lightboxClose = document.getElementById('lightboxClose');
        const lightboxPrev = document.getElementById('lightboxPrev');
        const lightboxNext = document.getElementById('lightboxNext');
        const lightboxCounter = document.getElementById('lightboxCounter');
        const lightboxTitle = document.getElementById('lightboxTitle');
        const lightboxDescription = document.getElementById('lightboxDescription');

        let currentImageIndex = 0;
        const images = Array.from(portfolioItems);

        const captions = [
            { title: "Music & Entertainment", description: "Capturing the energy and passion of live performances." },
            { title: "Wedding Photography", description: "Documenting love stories with elegance and authenticity." },
            { title: "Professional Portraits", description: "Executive portraits that convey confidence and professionalism." },
            { title: "Personal Branding", description: "Creating compelling portraits that tell your unique story." },
            { title: "Group Portraits", description: "Coordinated sessions capturing family dynamics." },
            { title: "Wedding Moments", description: "Intimate wedding photography focusing on candid emotions." },
            { title: "Character Portraits", description: "Artistic portrait work that captures personality." },
            { title: "Couple Photography", description: "Romantic sessions celebrating relationships." },
            { title: "Portrait Artistry", description: "Creative portrait work combining technical excellence." },
            { title: "Lifestyle Portraits", description: "Natural portrait photography in comfortable settings." },
            { title: "Professional Headshots", description: "Clean, professional headshots for business profiles." },
            { title: "Product Photography", description: "Commercial product photography with perfect lighting." },
            { title: "Personal Portraits", description: "Individual portrait sessions capturing personality." },
            { title: "Studio Portraits", description: "Controlled studio environment with professional lighting." },
            { title: "Landscape Photography", description: "Breathtaking natural landscapes with dramatic lighting." },
            { title: "Environmental Photography", description: "Documentary-style photography in natural environments." }
        ];

        function openLightbox(index) {
            currentImageIndex = index;
            updateLightboxContent();
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        }

        function updateLightboxContent() {
            const currentItem = images[currentImageIndex];
            const imgSrc = currentItem.querySelector('img').src;
            const caption = captions[currentImageIndex];

            lightboxImage.src = imgSrc;
            lightboxCounter.textContent = `${currentImageIndex + 1} / ${images.length}`;
            lightboxTitle.textContent = caption.title;
            lightboxDescription.textContent = caption.description;
        }

        function nextImage() {
            currentImageIndex = (currentImageIndex + 1) % images.length;
            updateLightboxContent();
        }

        function prevImage() {
            currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
            updateLightboxContent();
        }

        portfolioItems.forEach((item, index) => {
            item.addEventListener('click', () => openLightbox(index));
        });

        lightboxClose.addEventListener('click', closeLightbox);
        lightboxNext.addEventListener('click', nextImage);
        lightboxPrev.addEventListener('click', prevImage);

        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) {
                closeLightbox();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (!lightbox.classList.contains('active')) return;
            
            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowRight') nextImage();
            if (e.key === 'ArrowLeft') prevImage();
        });

        // Photo of the Day thumbnail and navigation functionality  
        const potdThumbnails = document.querySelectorAll('.potd-thumbnail');
        const potdFeaturedImage = document.querySelector('.potd-featured-image img');
        const potdFeaturedDate = document.querySelector('.potd-date');
        const potdFeaturedTitle = document.querySelector('.potd-featured-content .potd-title');
        const potdFeaturedCaption = document.querySelector('.potd-caption');
        const potdPrevBtn = document.getElementById('potdPrev');
        const potdNextBtn = document.getElementById('potdNext');
        
        let currentPotdIndex = 0;
        
        // Find the initially active thumbnail
        potdThumbnails.forEach((thumbnail, index) => {
            if (thumbnail.classList.contains('active')) {
                currentPotdIndex = index;
            }
        });

        function updatePotdDisplay(index) {
            const thumbnail = potdThumbnails[index];
            if (!thumbnail) return;
            
            const date = thumbnail.dataset.date;
            const image = thumbnail.dataset.image;
            const caption = thumbnail.dataset.caption;
            const title = thumbnail.dataset.title;

            potdFeaturedImage.style.opacity = '0';
            setTimeout(() => {
                potdFeaturedImage.src = image;
                potdFeaturedImage.alt = `Photo of the Day - ${date}`;
                potdFeaturedDate.textContent = date;
                potdFeaturedTitle.textContent = title;
                potdFeaturedCaption.textContent = caption;
                potdFeaturedImage.style.opacity = '1';
            }, 200);

            // Update active thumbnail
            potdThumbnails.forEach(thumb => thumb.classList.remove('active'));
            thumbnail.classList.add('active');
            
            currentPotdIndex = index;
        }

        // Thumbnail click handlers
        potdThumbnails.forEach((thumbnail, index) => {
            thumbnail.addEventListener('click', () => {
                updatePotdDisplay(index);
            });
        });
        
        // Navigation arrow handlers
        if (potdPrevBtn && potdNextBtn) {
            potdPrevBtn.addEventListener('click', () => {
                const newIndex = currentPotdIndex > 0 ? currentPotdIndex - 1 : potdThumbnails.length - 1;
                updatePotdDisplay(newIndex);
            });
            
            potdNextBtn.addEventListener('click', () => {
                const newIndex = currentPotdIndex < potdThumbnails.length - 1 ? currentPotdIndex + 1 : 0;
                updatePotdDisplay(newIndex);
            });
        }
    </script>
{{ end }}